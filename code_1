import argparse
from reportlab.lib.pagesizes import letter
from reportlab.pdfgen import canvas

def text_to_pdf(input_file, output_file):
    c = canvas.Canvas(output_file, pagesize=letter)
    c.setFont("Courier", 8)  # Slightly smaller font

    try:
        with open(input_file, "r") as f:
            lines = f.readlines()
    except FileNotFoundError:
        print("Error: Input file not found.")
        return

    y = 750
    x = 40
    line_height = 12  # Adjusted for smaller font

    for line in lines:
        if y < 40:
            c.showPage()
            c.setFont("Courier", 8)
            y = 750

        # Truncate lines that exceed the page width to avoid drawing beyond the edge
        line = line.rstrip("\n")
        max_chars = 120  # Estimate max characters that fit in 8pt Courier
        c.drawString(x, y, line[:max_chars])
        y -= line_height

    c.save()
    print(f"PDF created successfully at: {output_file}")

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description="Convert TXT to PDF (preserving alignment)")
    parser.add_argument("input_file", help="Path to input .txt file")
    parser.add_argument("output_file", help="Path to output .pdf file")
    args = parser.parse_args()

    text_to_pdf(args.input_file, args.output_file)
